(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{12:function(e,t,r){"use strict";var n=r(13),o=r(15),a=r(21),i=r(18),u=r(20),c={"/":n.a,"/list":n.a,"/detail/:id":o.a,"/liked":a.a,"/search":i.a,"/error":u.a};t.a=c},16:function(e,t,r){"use strict";var n=r(5),o=r(0),a=r(8);function i(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,c,"next",e)}function c(e){i(a,n,o,u,c,"throw",e)}u(void 0)}))}}var c={init:function(e){var t=this;return u(regeneratorRuntime.mark((function r(){var n,o,a,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.likeButtonContainer,o=e.resto,a=e.favouriteResto,i=e.notificationHelper,t._likeButtonContainer=n,t._resto=o,t._favouriteResto=a,t._notificationHelper=i,r.next=7,t._renderButton();case 7:case"end":return r.stop()}}),r)})))()},_renderButton:function(){var e=this;return u(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e._resto.id,console.log("id to renderButton: ",r),t.next=4,e._isRestoExist(r);case 4:if(!t.sent){t.next=9;break}return t.next=7,e._renderLiked();case 7:t.next=11;break;case 9:return t.next=11,e._renderLike();case 11:case"end":return t.stop()}}),t)})))()},_isRestoExist:function(e){var t=this;return u(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t._favouriteResto.getRestaurant(e);case 2:return n=r.sent,console.log("resto from _isRestoExist: ",n),r.abrupt("return",!!n);case 5:case"end":return r.stop()}}),r)})))()},_renderLike:function(){var e=this;return u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._likeButtonContainer.innerHTML=Object(o.d)(),document.querySelector("#likeButton").addEventListener("click",u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._favouriteResto.putRestaurant(e._resto);case 2:return t.next=4,e._renderButton();case 4:return t.next=6,a.a.sendNotification({title:"Hunger Apps",options:{body:"your liked restaurant is added"}});case 6:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t)})))()},_renderLiked:function(){var e=this;return u(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e._resto.id,e._likeButtonContainer.innerHTML=Object(o.e)(),document.querySelector("#likeButton").addEventListener("click",u(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.deleteRestaurant(r);case 2:return t.next=4,e._renderButton();case 4:return t.next=6,e._notificationHelper.sendNotification({title:"Hunger Apps",options:{body:"your liked restaurant removed"}});case 6:case"end":return t.stop()}}),t)}))));case 4:case"end":return t.stop()}}),t)})))()}};t.a=c},17:function(e,t,r){"use strict";var n=r(0);function o(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function u(e){o(i,n,a,u,c,"next",e)}function c(e){o(i,n,a,u,c,"throw",e)}u(void 0)}))}}var i={init:function(e){var t=this;return a(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.submitButtonContainer,o=e.id,t._id=o,t._submitButtonContainer=n,t._postHandler=t._postHandler.bind(t),r.next=6,t._renderForm();case 6:case"end":return r.stop()}}),r)})))()},_renderForm:function(){var e=this;return a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._submitButtonContainer.innerHTML=Object(n.c)(e._id),document.querySelector(".submitButtonContainer").innerHTML=Object(n.l)(),document.querySelector("#submitButton").addEventListener("click",e._postHandler);case 5:case"end":return t.stop()}}),t)})))()},_postHandler:function(e){var t=this;return a(regeneratorRuntime.mark((function r(){var o,a,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=document.querySelector("#name"),a=document.querySelector("#review"),r.prev=2,e.preventDefault(),r.next=6,fetch("https://restaurant-api.dicoding.dev/review",{method:"POST",headers:{"Content-Type":"application/json","X-Auth-Token":12345},body:JSON.stringify({id:t._id,review:a.value,name:o.value})});case 6:i=r.sent,console.log("your review is submitted: ",i),o.value="",a.value="",location.reload(),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(2),console.log(r.t0),"Failed to fetch"===r.t0.message&&Object(n.b)("#restoDetail");case 17:case"end":return r.stop()}}),r,null,[[2,13]])})))()}};t.a=i},19:function(e,t,r){"use strict";var n=r(0),o=r(4);function a(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function u(e){a(i,n,o,u,c,"next",e)}function c(e){a(i,n,o,u,c,"throw",e)}u(void 0)}))}}var u={init:function(e){var t=this;return i(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t._searchResultContainer=e,t._searchHandler=t._searchHandler.bind(t),r.next=4,t._renderSearchButton();case 4:case"end":return r.stop()}}),r)})))()},_renderSearchButton:function(){var e=this;return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._searchResultContainer.innerHTML=Object(n.k)(),document.querySelector("#searchButtonContainer").innerHTML=Object(n.j)(),document.querySelector("#submitSearch").addEventListener("click",e._searchHandler);case 5:case"end":return t.stop()}}),t)})))()},_searchHandler:function(){return i(regeneratorRuntime.mark((function e(){var t,r,a,i,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Object(o.a)("#restoList"),t=document.querySelector("#searchInput"),e.next=5,fetch("https://restaurant-api.dicoding.dev/search?q=".concat(t.value));case 5:return r=e.sent,e.next=8,r.json();case 8:a=e.sent,i=a.restaurants,console.log("search results: ",i),Object(o.b)("#restoList"),u=document.querySelector("#restoList"),console.log("resultsContainer: ",u),u.innerHTML="",t.value="",0===i.length&&(console.log("redirecting to search page"),u.innerHTML=Object(n.f)()),c=document.querySelector("#restoList"),i.forEach((function(e){c.innerHTML+=Object(n.h)(e)})),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.log(e.t0),Object(n.b)("#restoList");case 25:case"end":return e.stop()}}),e,null,[[0,21]])})))()}};t.a=u},22:function(e,t,r){"use strict";var n=function(e,t){var r=this;Array.from(e[0].children[0].children).forEach((function(e){e.children[0].addEventListener("click",(function(e){r._closeDrawer(e,t)}))}))},o={init:function(e){var t=this,r=e.button,o=e.drawer,a=e.content,i=e.nav;r.addEventListener("click",(function(e){t._toggleDrawer(e,o)})),a.addEventListener("click",(function(e){t._closeDrawer(e,o)})),n.call(this,i,o)},_toggleDrawer:function(e,t){e.stopPropagation(),t.classList.toggle("open")},_closeDrawer:function(e,t){e.stopPropagation(),t.classList.remove("open")}};t.a=o},3:function(e,t,r){"use strict";var n={DATABASE_NAME:"resto-catalogue-database",DATABASE_VERSION:1,OBJECT_STORE_NAME:"resto",TOKEN:12345,BASE_IMAGE_URL:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"small";return console.log("requesting image size: ",t),"https://restaurant-api.dicoding.dev/images/".concat(t,"/").concat(e)}};t.a=n},4:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=function(e){document.querySelector("".concat(e)).innerHTML='<div id="loader-wrapper"></div>'},o=function(e){document.querySelector("".concat(e)).innerHTML=""}},45:function(e,t,r){"use strict";r.r(t),t.default=r.p+"e3349136063d48b044c9cc4683cfd685.gif"},5:function(e,t,r){"use strict";var n=r(23),o=r(3);function a(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function u(e){a(i,n,o,u,c,"next",e)}function c(e){a(i,n,o,u,c,"throw",e)}u(void 0)}))}}var u=o.a.DATABASE_NAME,c=o.a.DATABASE_VERSION,s=o.a.OBJECT_STORE_NAME,f=Object(n.a)(u,c,{upgrade:function(e){e.createObjectStore(s,{keyPath:"id"})}}),l={getRestaurantList:function(){return i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f;case 2:return e.abrupt("return",e.sent.getAll(s));case 3:case"end":return e.stop()}}),e)})))()},getRestaurant:function(e){return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,f;case 4:return t.abrupt("return",t.sent.get(s,e));case 5:case"end":return t.stop()}}),t)})))()},putRestaurant:function(e){return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.id){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,f;case 4:return t.abrupt("return",t.sent.put(s,e));case 5:case"end":return t.stop()}}),t)})))()},deleteRestaurant:function(e){return i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f;case 2:return t.abrupt("return",t.sent.delete(s,e));case 3:case"end":return t.stop()}}),t)})))()},searchRestaurants:function(e){var t=this;return i(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.toLowerCase()||"-",r.next=3,t.getRestaurantList();case 3:return r.abrupt("return",r.sent.filter((function(e){var t=e.name;return-1!==(t?t.toLowerCase():"-").indexOf(n)})));case 4:case"end":return r.stop()}}),r)})))()}};t.a=l},54:function(e,t,r){"use strict";r.r(t);r(24),r(11),r(25),r(26),r(28),r(30),r(32),r(34),r(36),r(38),r(40),r(42),r(46),r(48),r(50),r(52);var n=r(14);function o(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}var a=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("registering service worker..."),!("serviceWorker"in navigator)){e.next=7;break}return e.next=5,navigator.serviceWorker.register("sw.js");case 5:e.next=8;break;case 7:console.log("service worker is not supported in this browser!");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function u(e){o(i,n,a,u,c,"next",e)}function c(e){o(i,n,a,u,c,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();function i(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,c,"next",e)}function c(e){i(a,n,o,u,c,"throw",e)}u(void 0)}))}}var c=document.querySelectorAll("#navigationDrawer"),s=new n.a({content:document.querySelector("#content-component"),button:document.querySelector("#hamburgerBtn"),nav:c,drawer:document.querySelector(".nav")});window.addEventListener("hashchange",u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.renderPage();case 2:case"end":return e.stop()}}),e)})))),window.addEventListener("DOMContentLoaded",u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.renderPage();case 2:return e.prev=2,e.next=5,s.renderPage();case 5:return e.next=7,a();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))))},6:function(e,t,r){"use strict";var n={parseActiveUrlWithCombiner:function(){var e=window.location.hash.slice(1).toLowerCase(),t=this._urlSplitter(e);return this._urlCombiner(t)},parseActiveUrlWithoutCombiner:function(){var e=window.location.hash.slice(1).toLowerCase();return this._urlSplitter(e)},_urlSplitter:function(e){var t=e.split("/");return{resource:t[1]||null,id:t[2]||null,verb:t[3]||null}},_urlCombiner:function(e){var t=e.resource,r=e.id,n=e.verb;return"".concat((t?"/".concat(t):"/")+(r?"/:id":"")+(n||""))}};t.a=n},7:function(e,t,r){"use strict";function n(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function u(e){n(i,o,a,u,c,"next",e)}function c(e){n(i,o,a,u,c,"throw",e)}u(void 0)}))}}var a={getRestoList:function(){return o(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://restaurant-api.dicoding.dev/list");case 3:if(200!==(t=e.sent).status){e.next=10;break}return e.next=7,t.json();case 7:return r=e.sent,n=r.restaurants,e.abrupt("return",n);case 10:return e.abrupt("return",[]);case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},getRestoDetail:function(e){return o(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://restaurant-api.dicoding.dev/detail/".concat(e));case 3:if(r=t.sent,console.log("response status: ",r.status),400===r.status){t.next=11;break}return t.next=8,r.json();case 8:return n=t.sent,o=n.restaurant,t.abrupt("return",o);case 11:t.next=17;break;case 13:throw t.prev=13,t.t0=t.catch(0),console.log("error on fetching restaurant resources: ",t.t0.message),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},searchResto:function(){return o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}};t.a=a},8:function(e,t,r){"use strict";function n(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function u(e){n(i,o,a,u,c,"next",e)}function c(e){n(i,o,a,u,c,"throw",e)}u(void 0)}))}}var a={sendNotification:function(e){var t=this;return o(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=e.title,o=e.options,t._checkAvailibility()){r.next=4;break}return console.log("notification is not supported!"),r.abrupt("return");case 4:if(t._checkPermission()){r.next=9;break}return console.log("user doesn't grant permission"),r.next=8,t._requestPermission();case 8:return r.abrupt("return");case 9:return r.next=11,t._showNotification({title:n,options:o});case 11:case"end":return r.stop()}}),r)})))()},_checkAvailibility:function(){return!!("Notification"in window)},_checkPermission:function(){return"granted"===Notification.permission},_requestPermission:function(){return o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Notification.requestPermission();case 2:"denied"===(t=e.sent)&&console.log("notification denied"),"default"===t&&console.log("notification request is closed by user");case 5:case"end":return e.stop()}}),e)})))()},_showNotification:function(e){return o(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.title,n=e.options,t.next=3,navigator.serviceWorker.ready;case 3:t.sent.showNotification(r,n);case 5:case"end":return t.stop()}}),t)})))()}};t.a=a},9:function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){c=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t,r=n(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(null!==document.querySelector("".concat(o)))document.querySelector("".concat(o)).remove()}}catch(e){r.e(e)}finally{r.f()}}}}]);